<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UN Speeches Country Clustering - 2024</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 20px;
        }
        
        .header h1 {
            margin: 0;
            color: #2c3e50;
            font-size: 2.5rem;
        }
        
        .header p {
            margin: 10px 0 0 0;
            color: #6c757d;
            font-size: 1.1rem;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .stat {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            min-width: 120px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 4px;
        }
        
        .visualization-container {
            display: flex;
            gap: 20px;
            margin: 30px 0;
        }
        
        .chart-container {
            flex: 2;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 20px;
        }
        
        .chart-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .legend-container {
            flex: 1;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .legend-item:hover {
            background-color: #e9ecef;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .legend-text {
            flex-grow: 1;
        }
        
        .legend-title {
            font-weight: bold;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }
        
        .legend-description {
            font-size: 0.8rem;
            color: #6c757d;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            max-width: 300px;
        }
        
        .country-circle {
            cursor: pointer;
            stroke-width: 2;
            stroke: rgba(255, 255, 255, 0.8);
        }
        
        .country-circle:hover {
            stroke-width: 3;
            stroke: #333;
        }
        
        .cluster-details {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #007bff;
        }
        
        .cluster-details h3 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }
        
        .cluster-countries {
            margin: 10px 0;
        }
        
        .cluster-countries strong {
            color: #495057;
        }
        
        .sample-chunks {
            margin-top: 15px;
        }
        
        .sample-chunk {
            background: white;
            padding: 10px;
            margin: 8px 0;
            border-radius: 4px;
            border-left: 3px solid #17a2b8;
        }
        
        .chunk-text {
            font-style: italic;
            margin-bottom: 5px;
            line-height: 1.4;
        }
        
        .chunk-country {
            font-size: 0.85rem;
            color: #6c757d;
            font-weight: bold;
        }
        
        #scatter-plot {
            width: 100%;
            height: 500px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåç UN Speeches Country Clustering</h1>
            <p>Semantic similarity analysis of UN General Assembly speeches for 2024</p>
            <div class="stats">
                <div class="stat">
                    <div class="stat-value">50</div>
                    <div class="stat-label">Countries</div>
                </div>
                <div class="stat">
                    <div class="stat-value">6</div>
                    <div class="stat-label">Clusters</div>
                </div>
                <div class="stat">
                    <div class="stat-value">534</div>
                    <div class="stat-label">Speech Chunks</div>
                </div>
                <div class="stat">
                    <div class="stat-value">3.8s</div>
                    <div class="stat-label">Processing Time</div>
                </div>
            </div>
        </div>
        
        <div class="visualization-container">
            <div class="chart-container">
                <h3 class="chart-title">Country Similarity Clusters</h3>
                <svg id="scatter-plot"></svg>
            </div>
            
            <div class="legend-container">
                <h3 class="chart-title">Clusters</h3>
                <div id="legend"></div>
            </div>
        </div>
        
        <div id="cluster-details" class="cluster-details" style="display: none;">
            <h3 id="cluster-title"></h3>
            <div id="cluster-description"></div>
            <div id="cluster-countries" class="cluster-countries"></div>
            <div id="sample-chunks" class="sample-chunks"></div>
        </div>
    </div>

    <script>
        // Data
        const countries = [{"countryCode":"VAT","countryName":"Holy See","year":2024,"x":-0.5479544120559393,"y":0.16485344331354493,"clusterId":-2,"chunkCount":20,"speechCount":1},{"countryCode":"TUR","countryName":"Turkey","year":2024,"x":-0.37083428458636025,"y":0.36437101619997575,"clusterId":-2,"chunkCount":15,"speechCount":1},{"countryCode":"ISR","countryName":"Israel","year":2024,"x":-0.08735980933923199,"y":0.5509818376970965,"clusterId":-2,"chunkCount":14,"speechCount":1},{"countryCode":"AUS","countryName":"Australia","year":2024,"x":-0.24233863114715076,"y":0.30294276919326296,"clusterId":0,"chunkCount":13,"speechCount":1},{"countryCode":"AGO","countryName":"Angola","year":2024,"x":0.14815241670767826,"y":-0.08867208486650237,"clusterId":1,"chunkCount":12,"speechCount":1},{"countryCode":"BGD","countryName":"Bangladesh ","year":2024,"x":0.21305433387362066,"y":0.21950490794747496,"clusterId":2,"chunkCount":12,"speechCount":1},{"countryCode":"COD","countryName":"Democratic Republic of Congo","year":2024,"x":-0.4384879264530201,"y":0.017807699166959418,"clusterId":3,"chunkCount":12,"speechCount":1},{"countryCode":"HTI","countryName":"Haiti","year":2024,"x":-0.11094321699625696,"y":-0.3192232830742137,"clusterId":1,"chunkCount":12,"speechCount":1},{"countryCode":"KEN","countryName":"Kenya","year":2024,"x":-0.011615551959912682,"y":-0.10578511496808371,"clusterId":1,"chunkCount":12,"speechCount":1},{"countryCode":"KIR","countryName":"Kiribati ","year":2024,"x":-0.3589480278179391,"y":-0.03525694835982393,"clusterId":3,"chunkCount":12,"speechCount":1},{"countryCode":"MLT","countryName":"Malta","year":2024,"x":-0.29767533789249123,"y":0.18894279594441685,"clusterId":0,"chunkCount":12,"speechCount":1},{"countryCode":"NGA","countryName":"Nigeria","year":2024,"x":-0.13187019747200482,"y":0.023658062066132187,"clusterId":1,"chunkCount":12,"speechCount":1},{"countryCode":"RUS","countryName":"Russia","year":2024,"x":0.05968283892847541,"y":0.19524606738850878,"clusterId":4,"chunkCount":12,"speechCount":1},{"countryCode":"HRV","countryName":"Croatia","year":2024,"x":-0.07886851784511548,"y":-0.028963265207341802,"clusterId":1,"chunkCount":11,"speechCount":1},{"countryCode":"FRA","countryName":"France","year":2024,"x":0.18804926110439354,"y":0.10492955153366926,"clusterId":2,"chunkCount":11,"speechCount":1},{"countryCode":"GRC","countryName":"Greece","year":2024,"x":0.2562899646326349,"y":-0.04443628492326396,"clusterId":2,"chunkCount":11,"speechCount":1},{"countryCode":"JAM","countryName":"Jamaica","year":2024,"x":-0.43785071529464437,"y":-0.3602599029217537,"clusterId":1,"chunkCount":11,"speechCount":1},{"countryCode":"MNG","countryName":"Mongolia","year":2024,"x":-0.2049715690166858,"y":0.4016720065388476,"clusterId":5,"chunkCount":11,"speechCount":1},{"countryCode":"ESP","countryName":"Spain","year":2024,"x":-0.09697474568484071,"y":0.32461213209400774,"clusterId":5,"chunkCount":11,"speechCount":1},{"countryCode":"SYR","countryName":"Syria","year":2024,"x":-0.31624702669642246,"y":0.4470617962161885,"clusterId":5,"chunkCount":11,"speechCount":1},{"countryCode":"TON","countryName":"Tonga","year":2024,"x":-0.41094177582972075,"y":-0.20167157448737666,"clusterId":1,"chunkCount":11,"speechCount":1},{"countryCode":"TUV","countryName":"Tuvalu","year":2024,"x":-0.477876806923851,"y":-0.18204070283042414,"clusterId":1,"chunkCount":11,"speechCount":1},{"countryCode":"USA","countryName":"United States of America","year":2024,"x":0.13724483540089719,"y":-0.3209564317441946,"clusterId":1,"chunkCount":11,"speechCount":1},{"countryCode":"VEN","countryName":"Venezuela","year":2024,"x":-0.07248179803616482,"y":-0.40781701291936245,"clusterId":1,"chunkCount":11,"speechCount":1},{"countryCode":"AZE","countryName":"Azerbaijan ","year":2024,"x":0.2936175946284152,"y":-0.21747459894273571,"clusterId":-2,"chunkCount":10,"speechCount":1},{"countryCode":"CHN","countryName":"China","year":2024,"x":-0.06602732194568967,"y":0.17682486266706293,"clusterId":4,"chunkCount":10,"speechCount":1},{"countryCode":"CYP","countryName":"Cyprus","year":2024,"x":-0.23974861284863808,"y":0.13342164653651317,"clusterId":0,"chunkCount":10,"speechCount":1},{"countryCode":"GIN","countryName":"Guinea","year":2024,"x":-0.5799698554265702,"y":-0.0735372377403475,"clusterId":-2,"chunkCount":10,"speechCount":1},{"countryCode":"ISL","countryName":"Iceland","year":2024,"x":0.0016677272310244144,"y":0.30388942560604576,"clusterId":4,"chunkCount":10,"speechCount":1},{"countryCode":"KGZ","countryName":"Kyrgyzstan ","year":2024,"x":0.19667010728270887,"y":-0.29323649947768915,"clusterId":-2,"chunkCount":10,"speechCount":1},{"countryCode":"FSM","countryName":"Micronesia ","year":2024,"x":-0.35954525568525214,"y":-0.41706581942249643,"clusterId":1,"chunkCount":10,"speechCount":1},{"countryCode":"SMR","countryName":"San Marino","year":2024,"x":0.04152262509068096,"y":0.10140117394433604,"clusterId":4,"chunkCount":10,"speechCount":1},{"countryCode":"SRB","countryName":"Serbia","year":2024,"x":0.31050369342363326,"y":0.12977857852481325,"clusterId":2,"chunkCount":10,"speechCount":1},{"countryCode":"TTO","countryName":"Trinidad and Tobago ","year":2024,"x":-0.07625604269059687,"y":-0.19418269698304275,"clusterId":1,"chunkCount":10,"speechCount":1},{"countryCode":"AND","countryName":"Andorra","year":2024,"x":0.050632967949648056,"y":-0.04452205596139991,"clusterId":1,"chunkCount":9,"speechCount":1},{"countryCode":"ATG","countryName":"Antigua and Barbuda ","year":2024,"x":-0.2586569949729932,"y":-0.37592494186922565,"clusterId":1,"chunkCount":9,"speechCount":1},{"countryCode":"BRB","countryName":"Barbados","year":2024,"x":-0.18146673387801449,"y":-0.24840093703272853,"clusterId":1,"chunkCount":9,"speechCount":1},{"countryCode":"GTM","countryName":"Guatemala","year":2024,"x":-0.24952998414849983,"y":-0.1129758642361106,"clusterId":1,"chunkCount":9,"speechCount":1},{"countryCode":"JPN","countryName":"Japan","year":2024,"x":-0.4113151189378963,"y":0.12563101363170273,"clusterId":3,"chunkCount":9,"speechCount":1},{"countryCode":"MDV","countryName":"Maldives","year":2024,"x":0.0751074975600529,"y":0.4222358480600101,"clusterId":-2,"chunkCount":9,"speechCount":1},{"countryCode":"MNE","countryName":"Montenegro ","year":2024,"x":-0.14935083498179919,"y":0.1363682848231265,"clusterId":4,"chunkCount":9,"speechCount":1},{"countryCode":"NIC","countryName":"Nicaragua","year":2024,"x":0.041375855391397716,"y":-0.4531626584373127,"clusterId":1,"chunkCount":9,"speechCount":1},{"countryCode":"MKD","countryName":"North Macedonia ","year":2024,"x":-0.4789570488815132,"y":0.2509734946188815,"clusterId":-2,"chunkCount":9,"speechCount":1},{"countryCode":"QAT","countryName":"Qatar","year":2024,"x":0.2540573717581547,"y":0.05014786323652021,"clusterId":2,"chunkCount":9,"speechCount":1},{"countryCode":"KNA","countryName":"Saint Kitts and Nevis","year":2024,"x":-0.36600426921828916,"y":-0.3011390357194567,"clusterId":1,"chunkCount":9,"speechCount":1},{"countryCode":"VCT","countryName":"Saint Vincent and the Grenadines","year":2024,"x":0.0337622011813508,"y":-0.32078131318328323,"clusterId":1,"chunkCount":9,"speechCount":1},{"countryCode":"SLB","countryName":"Solomon Islands","year":2024,"x":-0.36213614410330386,"y":-0.1760288347026487,"clusterId":1,"chunkCount":9,"speechCount":1},{"countryCode":"SSD","countryName":"South Sudan ","year":2024,"x":0.1810052213090688,"y":0.33326399533401,"clusterId":2,"chunkCount":9,"speechCount":1},{"countryCode":"UGA","countryName":"Uganda","year":2024,"x":-0.5276295354525058,"y":-0.005151022029074744,"clusterId":3,"chunkCount":9,"speechCount":1},{"countryCode":"BLZ","countryName":"Belize","year":2024,"x":-0.24570090946571072,"y":-0.2377222364538496,"clusterId":1,"chunkCount":8,"speechCount":1}];
        const clusters = [{"id":0,"name":"Cluster 1","description":"Focus on peace and security (3 countries)","countries":["Australia","Malta","Cyprus"],"representativeChunks":[{"text":"arly two million Gazans displaced, some many times over. \nMore than two million facing acute food insecurity. \nThis must end. \nPalestinian civilians cannot be made to pay the price of defeating Hamas....","country":"Australia","similarity":0.8},{"text":"sanctions which is not warranted. \nPresident, we have witnessed how effective global health policies can unite nations, especially when addressing crises that transcend borders and that affect us all....","country":"Malta","similarity":0.8},{"text":"e to stand ready to do anything it can to aid that process, and we will be unstinting in advocating for proactive engagement by the international community to support and enhance these UN led efforts....","country":"Malta","similarity":0.8},{"text":"ization Treaty on Intellectual Property, Genetic Resources and Associated Traditional Knowledge.  \nThe treaty acknowledges the link between traditional knowledge, innovation and intellectual property....","country":"Australia","similarity":0.8},{"text":"llion passengers safely in the sky every day. \nIt is resolving and preventing conflicts in 53 peacekeeping and political missions. \nEach year it saves more than 350 million children from malnutrition....","country":"Australia","similarity":0.8}],"color":"#e74c3c"},{"id":1,"name":"African Union States","description":"Focus on climate action, sustainable development, peace and security (21 countries)","countries":["Angola","Haiti","Kenya","Nigeria","Croatia","Jamaica","Tonga","Tuvalu","United States of America","Venezuela","Micronesia ","Trinidad and Tobago ","Andorra","Antigua and Barbuda ","Barbados","Guatemala","Nicaragua","Saint Kitts and Nevis","Saint Vincent and the Grenadines","Solomon Islands","Belize"],"representativeChunks":[{"text":"'s peoples needs a founda=on of tolerance, security, equality, and jus=ce.\" That founda:on is fragile, but it is essen:al. And it is crumbling under the weight of neglect, greed and abuse of power. \nG...","country":"Saint Kitts and Nevis","similarity":0.8},{"text":"gnizing the jurisdiction of the International Court of Justice (ICJ) in this case, nor any decision it may adopt on this matter. \n \n20. The President of Guyana has lied in this tribune on this aspect....","country":"Venezuela","similarity":0.8},{"text":"rity is critical to the creation of an environment in which free and fair elections can be held. The establishment of democratic governance is critical for sustainable economic growth and development....","country":"Jamaica","similarity":0.8},{"text":"track in attaining the SDGs. \n \nGetting the SDGs back on track \n \nMr. President,  \nThe SDGs were adopted by leaders as a universal clarion call to tackle poverty, ensure peace, and promote prosperity....","country":"Jamaica","similarity":0.8},{"text":"**Mr President,**  \n**Mr Secretary-General,**  \n**Excellencies,**  \n**Ladies and Gentlemen,**\n\nAllow me first to offer my congratulations to His Excellency Mr Phil√©mon Yang on his election as Presiden...","country":"Andorra","similarity":0.8}],"color":"#3498db"},{"id":2,"name":"European Union & Allies","description":"Focus on sustainable development, peace and security (6 countries)","countries":["Bangladesh ","France","Greece","Serbia","Qatar","South Sudan "],"representativeChunks":[{"text":"nniversary of the Geneva Conventions. Let us not allow the idea to take hold, even for a moment, that the dead in Ukraine are the North‚Äôs concern, the dead in Gaza the South‚Äôs, or that the victims of ...","country":"France","similarity":0.8},{"text":"ontinue to provide Ukraine with vital defence equipment, and alongside our closest allies and partners, we will support the Ukrainian people‚Äôs remarkable resistance and work to secure long-term peace....","country":"France","similarity":0.8},{"text":"of its population, with young people constituting over 70% of the population. This demographic reality can be harnessed for a brighter future through proactive and progressive investment in the youth....","country":"South Sudan ","similarity":0.8},{"text":"h Commissioner for Human Rights has dispatched a Fact-Finding Mission to investigate into the gross human rights violations during the people‚Äôs movement and to suggest for sustainable course correctio...","country":"Bangladesh ","similarity":0.8},{"text":"them simultaneously across thousands of people with total disregard for their identity or location, Israel is currently waging a war on Lebanon and no one knows to what extent this war could escalate....","country":"Qatar","similarity":0.8}],"color":"#2ecc71"},{"id":3,"name":"Cluster 4","description":"Focus on sustainable development (4 countries)","countries":["Democratic Republic of Congo","Kiribati ","Japan","Uganda"],"representativeChunks":[{"text":"that it is urgent to stop these actions that threaten the economic and social development of the countries that are subject to them and, consequently, prevent them from achieving the Sustainable Devel...","country":"Uganda","similarity":0.8},{"text":"tackled **redundantly** across different forums, sometimes with contradictory approaches‚Äîwhile other issues are **entirely overlooked**, each international bureaucracy trying to justify its own existe...","country":"Democratic Republic of Congo","similarity":0.8},{"text":"including allowing seats for Small Island Developing States (SIDS) and other vulnerable countries. To Ensure that the perspectives and needs of the most vulnerable nations are heard and addressed.\nMr....","country":"Kiribati ","similarity":0.8},{"text":"ealities of nuclear weapons use as the starting point for all nuclear disarmament measures. Japan will also act to further advance nuclear disarmament as we head toward the 2026 NPT Review Conference....","country":"Japan","similarity":0.8},{"text":"lity and vulnerability‚Äîexacerbated by armed conflict.\n\nIn response, we have developed a **roadmap** of specific actions, reforms, and interventions to accelerate progress and meet the **2030 Agenda**....","country":"Democratic Republic of Congo","similarity":0.8}],"color":"#f39c12"},{"id":4,"name":"Cluster 5","description":"Focus on peace and security (5 countries)","countries":["Russia","China","Iceland","San Marino","Montenegro "],"representativeChunks":[{"text":"call upon all the parties to deescalate and engage in a meaningful dialogue. \n \nOur position is clear ‚Äì we have condemned the indiscriminate terrorist attacks by Hamas on Israel from October 7th 2023....","country":"Montenegro ","similarity":0.8},{"text":"024 at the Tenth Emergency Special Session, which upgrades Palestine‚Äôs rights at the United Nations as an observer State, urging the Security Council to favorably consider its full membership.  \n \nMr....","country":"San Marino","similarity":0.8},{"text":"e consider it essential to continue this discussion, both within the United Nations and in other fora.\n\nA truly fair world order must include **expanded representation of the Global South** on the **U...","country":"Russia","similarity":0.8},{"text":"Mr. Chairman, \nExcellencies, \nLadies and gentlemen, \n \nIt is my pleasure to address you today on behalf of Montenegro and to reiterate our unequivocal support and commitment to the goals and principle...","country":"Montenegro ","similarity":0.8},{"text":"as the International Criminal Court.  \nWe also call on all member States to ratify the Optional Protocol to the Convention on the Rights of the Child on the Involvement of Children in Armed Conflict. ...","country":"San Marino","similarity":0.8}],"color":"#9b59b6"},{"id":5,"name":"Cluster 6","description":"Diverse policy priorities (3 countries)","countries":["Mongolia","Spain","Syria"],"representativeChunks":[{"text":"transportation sector, civil aviation equipment and supplies, and the agricultural sector was not spared from these measures, which prevented obtaining agricultural production requirements, which led ...","country":"Syria","similarity":0.8},{"text":"competitiveness.\n\nI speak from experience. More than half of the electricity produced in Spain last year came from renewable sources. At this point in the current year, that share already exceeds 60%....","country":"Spain","similarity":0.8},{"text":". \nThe Syrian government continues to confront the remaining organizations to end the suffering of Syrians in the areas which they still control, and to put an end to their attacks on the safe people....","country":"Syria","similarity":0.8},{"text":"ending and receiving envoys and ambassadors, concluding agreements, fostering friendships, and negotiating, which are the practices that remain as the cornerstone of Mongolia's current foreign policy....","country":"Mongolia","similarity":0.8},{"text":"rrying out a savage aggression on the Palestinian people and committing a genocide before the eyes of the whole world, which has claimed the lives of more than 42,000 Palestinians, most of whom are ch...","country":"Syria","similarity":0.8}],"color":"#1abc9c"}];
        
        // Set up dimensions and margins
        const margin = { top: 20, right: 20, bottom: 40, left: 40 };
        const width = 600 - margin.left - margin.right;
        const height = 500 - margin.top - margin.bottom;
        
        // Create SVG
        const svg = d3.select("#scatter-plot")
            .attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
            .append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);
        
        // Create scales
        const xExtent = d3.extent(countries, d => d.x);
        const yExtent = d3.extent(countries, d => d.y);
        
        const xScale = d3.scaleLinear()
            .domain(xExtent)
            .range([0, width]);
            
        const yScale = d3.scaleLinear()
            .domain(yExtent)
            .range([height, 0]);
        
        // Create color scale
        const clusterColors = {};
        clusters.forEach(cluster => {
            clusterColors[cluster.id] = cluster.color;
        });
        clusterColors[-2] = '#95a5a6'; // Color for noise/unclustered points
        
        // Create tooltip
        const tooltip = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);
        
        // Add axes
        svg.append("g")
            .attr("transform", `translate(0,${height})`)
            .call(d3.axisBottom(xScale))
            .append("text")
            .attr("x", width / 2)
            .attr("y", 35)
            .style("text-anchor", "middle")
            .style("fill", "#666")
            .text("Dimension 1");
            
        svg.append("g")
            .call(d3.axisLeft(yScale))
            .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", -25)
            .attr("x", -height / 2)
            .style("text-anchor", "middle")
            .style("fill", "#666")
            .text("Dimension 2");
        
        // Add country points
        svg.selectAll(".country-circle")
            .data(countries)
            .enter()
            .append("circle")
            .attr("class", "country-circle")
            .attr("cx", d => xScale(d.x))
            .attr("cy", d => yScale(d.y))
            .attr("r", d => Math.sqrt(d.chunkCount) + 3)
            .style("fill", d => clusterColors[d.clusterId] || '#95a5a6')
            .style("fill-opacity", 0.7)
            .on("mouseover", function(event, d) {
                const cluster = clusters.find(c => c.id === d.clusterId);
                const clusterName = cluster ? cluster.name : 'Unclustered';
                
                tooltip.transition()
                    .duration(200)
                    .style("opacity", .9);
                tooltip.html(`
                    <strong>${d.countryName}</strong><br/>
                    Cluster: ${clusterName}<br/>
                    Speeches: ${d.speechCount}<br/>
                    Chunks: ${d.chunkCount}
                `)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", function(d) {
                tooltip.transition()
                    .duration(500)
                    .style("opacity", 0);
            });
        
        // Create legend
        const legend = d3.select("#legend");
        
        clusters.forEach(cluster => {
            const legendItem = legend.append("div")
                .attr("class", "legend-item")
                .on("click", () => showClusterDetails(cluster));
                
            legendItem.append("div")
                .attr("class", "legend-color")
                .style("background", cluster.color);
                
            const legendText = legendItem.append("div")
                .attr("class", "legend-text");
                
            legendText.append("div")
                .attr("class", "legend-title")
                .text(cluster.name);
                
            legendText.append("div")
                .attr("class", "legend-description")
                .text(`${cluster.countries.length} countries`);
        });
        
        // Add unclustered legend item if there are any
        const unclusteredCount = countries.filter(c => c.clusterId < 0).length;
        if (unclusteredCount > 0) {
            const legendItem = legend.append("div")
                .attr("class", "legend-item");
                
            legendItem.append("div")
                .attr("class", "legend-color")
                .style("background", "#95a5a6");
                
            const legendText = legendItem.append("div")
                .attr("class", "legend-text");
                
            legendText.append("div")
                .attr("class", "legend-title")
                .text("Unclustered");
                
            legendText.append("div")
                .attr("class", "legend-description")
                .text(`${unclusteredCount} countries`);
        }
        
        // Function to show cluster details
        function showClusterDetails(cluster) {
            const detailsDiv = document.getElementById('cluster-details');
            const titleDiv = document.getElementById('cluster-title');
            const descriptionDiv = document.getElementById('cluster-description');
            const countriesDiv = document.getElementById('cluster-countries');
            const chunksDiv = document.getElementById('sample-chunks');
            
            titleDiv.textContent = cluster.name;
            descriptionDiv.textContent = cluster.description;
            
            countriesDiv.innerHTML = `<strong>Countries:</strong> ${cluster.countries.join(', ')}`;
            
            let chunksHtml = '<h4>Representative Speech Excerpts:</h4>';
            cluster.representativeChunks.forEach(chunk => {
                chunksHtml += `
                    <div class="sample-chunk">
                        <div class="chunk-text">"${chunk.text}"</div>
                        <div class="chunk-country">‚Äî ${chunk.country}</div>
                    </div>
                `;
            });
            chunksDiv.innerHTML = chunksHtml;
            
            detailsDiv.style.display = 'block';
            detailsDiv.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>